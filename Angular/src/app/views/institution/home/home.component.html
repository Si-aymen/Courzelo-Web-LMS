<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
<div *ngIf="!currentInstitution" class="loadscreen">
    <img src="assets/images/logo.png" class="logo mb-3" style="display: none" alt="">
    <div class="loader-bubble loader-bubble-primary d-block"></div>
</div>
<div *ngIf="currentInstitution"  class="card user-profile o-hidden mb-4">
    <div class="header-cover" style="background-image: url('assets/images/photo-wide-4.jpg')"></div>
    <div class="user-info">
        <img class="profile-picture avatar-lg mb-2" [src]="imageSrc || 'assets/default-university-image.jpg' " alt="">
        <p class="m-0 text-24">{{currentInstitution?.name}} </p>
        <p class="text-muted m-0">{{currentInstitution?.slogan||""}}</p>
    </div>
    <div class="card-body">
        <ngb-tabset (tabChange)="onTabChange($event)" class="nav-center">
            <ngb-tab title="Timeline">
                <ng-template ngbTabContent>
                    <ul class="timeline clearfix">
                        <li class="timeline-line"></li>
                        <li class="timeline-item">
                            <div class="timeline-badge">
                                <i class="badge-icon bg-primary text-white i-File-Pictures"></i>
                            </div>
                            <div class="timeline-card card">
                                <div class="card-body">
                                    <div class="mb-1">
                                        <strong class="mr-1">Timothy Carlson</strong> added a new photo
                                        <p class="text-muted">3 hours ago</p>
                                    </div>
                                    <img class="rounded mb-2" src="assets/images/photo-wide-1.jpg" alt="">
                                    <div class="mb-3">
                                        <a href="#" class="mr-1">Like</a>
                                        <a href="#">Comment</a>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Write comment" aria-label="comment">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" id="button-comment1">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-badge">
                                <img class="badge-img" src="assets/images/faces/1.jpg" alt="">
                            </div>
                            <div class="timeline-card card">
                                <div class="card-body">
                                    <div class="mb-1">
                                        <strong class="mr-1">Timothy Carlson</strong> updated his sattus
                                        <p class="text-muted">16 hours ago</p>
                                    </div>
                                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Modi dicta beatae illo
                                        illum iusto iste mollitia explicabo quam officia. Quas ullam, quisquam
                                        architecto
                                        aspernatur enim iure debitis dignissimos suscipit
                                        ipsa.
                                    </p>
                                    <div class="mb-3">
                                        <a href="#" class="mr-1">Like</a>
                                        <a href="#">Comment</a>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Write comment" aria-label="comment">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" id="button-comment2">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <ul class="timeline clearfix">
                        <li class="timeline-line"></li>
                        <li class="timeline-group text-center">
                            <button class="btn btn-icon-text btn-primary"><i class="i-Calendar-4"></i> 2018</button>
                        </li>
                    </ul>
                    <ul class="timeline clearfix">
                        <li class="timeline-line"></li>
                        <li class="timeline-item">
                            <div class="timeline-badge">
                                <i class="badge-icon bg-danger text-white i-Love-User"></i>
                            </div>
                            <div class="timeline-card card">
                                <div class="card-body">
                                    <div class="mb-1">
                                        <strong class="mr-1">New followers</strong>
                                        <p class="text-muted">2 days ago</p>
                                    </div>
                                    <p><a href="#">Henry krick</a> and 16 others followed you</p>
                                    <div class="mb-3">
                                        <a href="#" class="mr-1">Like</a>
                                        <a href="#">Comment</a>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Write comment" aria-label="comment">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" id="button-comment3">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="timeline-item">
                            <div class="timeline-badge">
                                <i class="badge-icon bg-primary text-white i-File-Pictures"></i>
                            </div>
                            <div class="timeline-card card">
                                <div class="card-body">
                                    <div class="mb-1">
                                        <strong class="mr-1">Timothy Carlson</strong> added a new photo
                                        <p class="text-muted">2 days ago</p>
                                    </div>
                                    <img class="rounded mb-2" src="assets/images/photo-wide-2.jpg" alt="">
                                    <div class="mb-3">
                                        <a href="#" class="mr-1">Like</a>
                                        <a href="#">Comment</a>
                                    </div>
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Write comment" aria-label="comment">
                                        <div class="input-group-append">
                                            <button class="btn btn-primary" type="button" id="button-comment4">Submit</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                    <ul class="timeline clearfix">
                        <li class="timeline-line"></li>
                        <li class="timeline-group text-center">
                            <button class="btn btn-icon-text btn-warning"><i class="i-Calendar-4"></i> Joined
                                in 2013</button>
                        </li>
                    </ul>
                </ng-template>
            </ngb-tab>
            <ngb-tab title="About">
                <ng-template ngbTabContent>
                    <h4>Information</h4>
                    <p>{{currentInstitution?.description||""}}</p>
                    <hr>
                    <div class="row">
                        <div class="col-md-4 col-6">
                            <div *ngIf="currentInstitution?.country" class="mb-4">
                                <p class="text-primary mb-1"><i class="i-Globe text-16 mr-1"></i>Country</p>
                                <span>{{ currentInstitution?.country }}</span>
                            </div>
                        </div>
                        <div class="col-md-4 col-6">
                            <div *ngIf="currentInstitution?.address" class="mb-4">
                                <p class="text-primary mb-1"><i class="i-University1 text-16 mr-1"></i> Address</p>
                                <span>{{currentInstitution?.address}}</span>
                            </div>
                            <div *ngIf="currentInstitution?.website" class="mb-4">
                                <p class="text-primary mb-1"><i class="i-Cloud-Weather text-16 mr-1"></i> Website</p>
                                <span>{{currentInstitution?.website}}</span>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <h4>Other Info</h4>
                    <p class="mb-4">Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum dolore labore
                        reiciendis
                        ab quo ducimus reprehenderit natus debitis, provident ad iure sed aut animi dolor incidunt
                        voluptatem. Blanditiis, nobis aut.</p>
                    <div class="row">
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Plane text-32 text-primary"></i>
                            <p class="text-16 mt-1">Travelling</p>
                        </div>
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Camera text-32 text-primary"></i>
                            <p class="text-16 mt-1">Photography</p>
                        </div>
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Car-3 text-32 text-primary"></i>
                            <p class="text-16 mt-1">Driving</p>
                        </div>
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Gamepad-2 text-32 text-primary"></i>
                            <p class="text-16 mt-1">Gaming</p>
                        </div>
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Music-Note-2 text-32 text-primary"></i>
                            <p class="text-16 mt-1">Music</p>
                        </div>
                        <div class="col-md-2 col-sm-4 col-6 text-center">
                            <i class="i-Shopping-Bag text-32 text-primary"></i>
                            <p class="text-16 mt-1">Shopping</p>
                        </div>
                    </div>
                </ng-template>
            </ngb-tab>
            <ngb-tab title="Map" id="mapTab">
                <ng-template ngbTabContent>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <div id="map"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </ngb-tab>
            <ngb-tab *ngIf="currentInstitution.hasCalendar" title="Calendar" >
                <ng-template ngbTabContent>
                    <div *ngIf="currentInstitution.hasCalendar" class="d-flex justify-content-center">
                        <button type="button" (click)="downloadExcel()" class="btn btn-info">Download Calendar</button>
                    </div>
                </ng-template>
            </ngb-tab>
            <ngb-tab *ngIf="currentUser.roles.includes('ADMIN')" title="Tools"  id="tools" >
                <ng-template ngbTabContent>
                    <div *ngIf="currentUser.roles.includes('ADMIN')"  class="d-flex justify-content-center">
                        <button type="button" (click)="addCourseModel(createCourse)" class="btn btn-info">Create Course</button>
                    </div>
                </ng-template>
            </ngb-tab>
        </ngb-tabset>
    </div>

</div>
<ng-template #createCourse let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title-user">Create Course</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form [formGroup]="createCourseForm" (ngSubmit)="addCourse()">
            <div class="row">
                <div class="col-md-6 form-group mb-3">
                    <label for="name">Name</label>
                    <input type="text" formControlName="name" class="form-control" id="name" placeholder="Course name">
                    <div *ngIf="shouldShowError('name', 'required')" class="text-danger">
                        Name is required.
                    </div>
                    <div *ngIf="shouldShowError('name', 'maxlength')" class="text-danger">
                        Name must be less than 50 characters.
                    </div>
                    <div *ngIf="shouldShowError('name', 'minlength')" class="text-danger">
                        Name must be more than 3 characters.
                    </div>
                </div>

                <div class="col-md-6 form-group mb-3">
                    <label for="description">description</label>
                    <textarea type="text" formControlName="description" class="form-control" id="description" placeholder="Course description"></textarea>
                    <div *ngIf="shouldShowError('description', 'required')" class="text-danger">
                        Description is required.
                    </div>
                    <div *ngIf="shouldShowError('description', 'maxlength')" class="text-danger">
                        Description must be less than 100 characters.
                    </div>
                    <div *ngIf="shouldShowError('description', 'minlength')" class="text-danger">
                        Description must be more than 3 characters.
                    </div>
                </div>
                <div class="col-md-6 form-group mb-3">
                    <label for="credit">credit</label>
                    <input type="number" formControlName="credit" class="form-control" id="credit" placeholder="Course credit">
                    <div *ngIf="shouldShowError('credit', 'required')" class="text-danger">
                        Credit is required.
                    </div>
                </div>
                <div class="col-md-6 form-group mb-3">
                    <label for="groups">Classes</label>
                    <select formControlName="group" class="form-control" id="groups" data-live-search="true">
                        <option *ngFor="let group of groups" [value]="group.id">{{ group.name }}</option>
                    </select>
                    <div *ngIf="shouldShowError('groups', 'required')" class="text-danger">
                        At least one class is required.
                    </div>
                </div>
                <div class="col-md-6 form-group mb-3">
                    <label for="teachers">Teachers</label>
                    <select formControlName="teacher" class="form-control" id="teachers" data-live-search="true">
                        <option *ngFor="let teacher of teachers" [value]="teacher">{{ teacher }}</option>
                    </select>
                    <div *ngIf="shouldShowError('teacher', 'required')" class="text-danger">
                        At least one teacher is required.
                    </div>
                </div>
                <div class="col-md-12">
                    <btn-loading btnClass="btn-primary btn-rounded" [loading]="loading">Create</btn-loading>
                </div>
            </div>
        </form>
    </div>
</ng-template>